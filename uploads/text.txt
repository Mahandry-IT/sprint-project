


<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Erreur - Système de Gestion de Vols</title>
    <link rel="stylesheet" href="/ticketing_project_war_exploded/css/main.css">
    <style>
        /* Styles spécifiques pour la page d'erreur */

    </style>
</head>
<body>
<div class="container">
    <div class="error-container">
        <!-- En-tête d'erreur -->
        <div class="error-header">
            <div class="error-code">500</div>
            <div class="error-title">Erreur interne du serveur</div>
            <div class="error-subtitle">java.lang.reflect.InvocationTargetException</div>
        </div>

        <!-- Contenu de l'erreur -->
        <div class="error-content">
            <!-- Stack trace -->
            <div class="error-section">
                <h3>Stack Trace</h3>
                
                <div class="stacktrace-container">
                    mg.itu.error.ErrorHandler:&nbsp;java.lang.reflect.InvocationTargetException<br>	at&nbsp;mg.itu.prom16.FrontController.getValueInMethod(FrontController.java:381)<br>	at&nbsp;mg.itu.prom16.FrontController.processRequest(FrontController.java:420)<br>	at&nbsp;mg.itu.prom16.FrontController.doPost(FrontController.java:796)<br>	at&nbsp;jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)<br>	at&nbsp;jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)<br>	at&nbsp;org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)<br>	at&nbsp;org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)<br>	at&nbsp;org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)<br>	at&nbsp;org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)<br>	at&nbsp;org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)<br>	at&nbsp;org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)<br>	at&nbsp;org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)<br>	at&nbsp;org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)<br>	at&nbsp;org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)<br>	at&nbsp;org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)<br>	at&nbsp;org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:666)<br>	at&nbsp;org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)<br>	at&nbsp;org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)<br>	at&nbsp;org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)<br>	at&nbsp;org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)<br>	at&nbsp;org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)<br>	at&nbsp;org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)<br>	at&nbsp;org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)<br>	at&nbsp;org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)<br>	at&nbsp;org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)<br>	at&nbsp;org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)<br>	at&nbsp;java.base/java.lang.Thread.run(Thread.java:842)<br>Caused&nbsp;by:&nbsp;java.lang.reflect.InvocationTargetException<br>	at&nbsp;java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native&nbsp;Method)<br>	at&nbsp;java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)<br>	at&nbsp;java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)<br>	at&nbsp;java.base/java.lang.reflect.Method.invoke(Method.java:568)<br>	at&nbsp;mg.itu.prom16.FrontController.getValueInMethod(FrontController.java:379)<br>	...&nbsp;26&nbsp;more<br>Caused&nbsp;by:&nbsp;org.hibernate.exception.SQLGrammarException:&nbsp;JDBC&nbsp;exception&nbsp;executing&nbsp;SQL&nbsp;[/*&nbsp;SELECT&nbsp;ps.price&nbsp;*&nbsp;(1&nbsp;-&nbsp;COALESCE(o.offer,&nbsp;0)/100)&nbsp;*&nbsp;(1&nbsp;-&nbsp;COALESCE(ao.offer,0)/100)FROM&nbsp;PlaneSeat&nbsp;ps&nbsp;LEFT&nbsp;JOIN&nbsp;Offer&nbsp;o&nbsp;ON&nbsp;o.type&nbsp;=&nbsp;ps.type&nbsp;AND&nbsp;o.flight.id&nbsp;=&nbsp;ps.flight.id&nbsp;LEFT&nbsp;JOIN&nbsp;AgeOffer&nbsp;ao&nbsp;ON&nbsp;ao.category.id&nbsp;=&nbsp;(&nbsp;&nbsp;&nbsp;&nbsp;SELECT&nbsp;ac.id&nbsp;FROM&nbsp;AgeCategory&nbsp;ac&nbsp;WHERE&nbsp;:passengerAge&nbsp;BETWEEN&nbsp;ac.minimal&nbsp;AND&nbsp;ac.maximal)&nbsp;LEFT&nbsp;JOIN&nbsp;ReservationDetail&nbsp;rd&nbsp;ON&nbsp;rd.seatType&nbsp;=&nbsp;ps.type&nbsp;AND&nbsp;rd.reservation.flight.id&nbsp;=&nbsp;ps.flight.id&nbsp;AND&nbsp;rd.reservation.status&nbsp;<>&nbsp;'CANCELLED'&nbsp;WHERE&nbsp;ps.flight.id&nbsp;=&nbsp;:flightId&nbsp;AND&nbsp;ps.type.id&nbsp;=&nbsp;:seatTypeId&nbsp;GROUP&nbsp;BY&nbsp;ps.price,&nbsp;o.offer,&nbsp;ao.offer,&nbsp;o.number&nbsp;HAVING&nbsp;COUNT(rd.id)&nbsp;<&nbsp;COALESCE(o.number,&nbsp;0)&nbsp;*/&nbsp;select&nbsp;((p1_0.price*(1-(coalesce(o1_0.offer,0)/100)))*(1-(coalesce(a1_0.offer,0)/100)))&nbsp;from&nbsp;plane_seat&nbsp;p1_0&nbsp;left&nbsp;join&nbsp;offer&nbsp;o1_0&nbsp;on&nbsp;o1_0.id_type=p1_0.id_type&nbsp;and&nbsp;o1_0.id_flight=p1_0.id_flight&nbsp;left&nbsp;join&nbsp;age_offer&nbsp;a1_0&nbsp;on&nbsp;a1_0.id_category=(select&nbsp;a2_0.id_category&nbsp;from&nbsp;age_category&nbsp;a2_0&nbsp;where&nbsp;?&nbsp;between&nbsp;a2_0.minimal&nbsp;and&nbsp;a2_0.maximal)&nbsp;left&nbsp;join&nbsp;reservation_details&nbsp;r1_0&nbsp;on&nbsp;r1_0.id_type=p1_0.id_type&nbsp;and&nbsp;r2_0.id_flight=p1_0.id_flight&nbsp;and&nbsp;r2_0.status!='CANCELLED'&nbsp;join&nbsp;reservation&nbsp;r2_0&nbsp;on&nbsp;r2_0.id_reservation=r1_0.id_reservation&nbsp;where&nbsp;p1_0.id_flight=?&nbsp;and&nbsp;p1_0.id_type=?&nbsp;group&nbsp;by&nbsp;p1_0.price,o1_0.offer,a1_0.offer,o1_0.number&nbsp;having&nbsp;count(r1_0.id_details)<coalesce(o1_0.number,0)]&nbsp;[ERREUR:&nbsp;entrée&nbsp;manquante&nbsp;de&nbsp;la&nbsp;clause&nbsp;FROM&nbsp;pour&nbsp;la&nbsp;table&nbsp;«&nbsp;r2_0&nbsp;»
&nbsp;&nbsp;Position :&nbsp;1004]&nbsp;[n/a]<br>	at&nbsp;org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:89)<br>	at&nbsp;org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:56)<br>	at&nbsp;org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)<br>	at&nbsp;org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)<br>	at&nbsp;org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.executeQuery(DeferredResultSetAccess.java:257)<br>	at&nbsp;org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.getResultSet(DeferredResultSetAccess.java:163)<br>	at&nbsp;org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.advanceNext(JdbcValuesResultSetImpl.java:254)<br>	at&nbsp;org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.processNext(JdbcValuesResultSetImpl.java:134)<br>	at&nbsp;org.hibernate.sql.results.jdbc.internal.AbstractJdbcValues.next(AbstractJdbcValues.java:19)<br>	at&nbsp;org.hibernate.sql.results.internal.RowProcessingStateStandardImpl.next(RowProcessingStateStandardImpl.java:66)<br>	at&nbsp;org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:198)<br>	at&nbsp;org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:33)<br>	at&nbsp;org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.doExecuteQuery(JdbcSelectExecutorStandardImpl.java:361)<br>	at&nbsp;org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.executeQuery(JdbcSelectExecutorStandardImpl.java:168)<br>	at&nbsp;org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.list(JdbcSelectExecutorStandardImpl.java:93)<br>	at&nbsp;org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:31)<br>	at&nbsp;org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$0(ConcreteSqmSelectQueryPlan.java:110)<br>	at&nbsp;org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:303)<br>	at&nbsp;org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:244)<br>	at&nbsp;org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:518)<br>	at&nbsp;org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:367)<br>	at&nbsp;org.hibernate.query.spi.AbstractSelectionQuery.getSingleResult(AbstractSelectionQuery.java:473)<br>	at&nbsp;mg.itu.ticketingproject.service.PlaneSeatService.getFinalSeatPrice(PlaneSeatService.java:200)<br>	at&nbsp;mg.itu.ticketingproject.controller.ReservationController.getPrice(ReservationController.java:32)<br>	...&nbsp;31&nbsp;more<br>Caused&nbsp;by:&nbsp;org.postgresql.util.PSQLException:&nbsp;ERREUR:&nbsp;entrée&nbsp;manquante&nbsp;de&nbsp;la&nbsp;clause&nbsp;FROM&nbsp;pour&nbsp;la&nbsp;table&nbsp;«&nbsp;r2_0&nbsp;»
&nbsp;&nbsp;Position :&nbsp;1004<br>	at&nbsp;org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2713)<br>	at&nbsp;org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2401)<br>	at&nbsp;org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:368)<br>	at&nbsp;org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:498)<br>	at&nbsp;org.postgresql.jdbc.PgStatement.execute(PgStatement.java:415)<br>	at&nbsp;org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:190)<br>	at&nbsp;org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:134)<br>	at&nbsp;org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.executeQuery(DeferredResultSetAccess.java:239)<br>	...&nbsp;50&nbsp;more<br>
                </div>
                
            </div>
        </div>

        <!-- Actions -->
        <div class="error-actions">
            <a href="/ticketing_project_war_exploded/" class="btn btn-primary">Accueil</a>
        </div>
    </div>
</div>
</body>
</html>